---
title: "ğŸŒ‰ kakehashi v0.0.13ãƒªãƒªãƒ¼ã‚¹ï¼Markdownã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¿ãŸã„ãªåŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰ã®è¨ºæ–­ã«å¯¾å¿œï¼"
author: atusy
date: '2026-02-04'
slug: kakehashi-v-0-0-13-with-diagnostic-support
categories: [Tech]
tags: [kakehashi, Neovim]
output:
  blogdown::html_page:
    md_extensions: +east_asian_line_breaks+task_lists
---

[atusy/kakehashi]: https://github.com/atusy/kakehashi
[kakehashi]: https://github.com/atusy/kakehashi

[kakehashi] v0.0.13ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸï¼

[kakehashi]ã¯ã€LSPã«å¯¾å¿œã™ã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ã«å¯¾ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹è¨€èªã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚

1. ä»»æ„è¨€èªã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆ
2. Markdownä¸­ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚ˆã†ãªåŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰ã«å¯¾ã™ã‚‹ã‚³ãƒ¼ãƒ‰è£œé–“ã€å®šç¾©ã‚¸ãƒ£ãƒ³ãƒ—ã€ãƒ›ãƒãƒ¼

ãã—ã¦ã€v0.0.13ã§ã¯ã‚³ãƒ¼ãƒ‰ã®è¨ºæ–­ã«å¯¾å¿œã—ã¾ã—ãŸã€‚
å‹•ç”»ã§ã¯Pythonã‚³ãƒ¼ãƒ‰ã‚’pyrightã§è¨ºæ–­ã—ãŸçµæœã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚

<video controls="controls" loop="loop" preload="metadata">
  <source src="video/demo.mp4" type="video/mp4">
</video>

ç¾æ™‚ç‚¹ã®åˆ¶é™ã¨ã—ã¦ã€è¨ºæ–­ã®è¡¨ç¤ºã«ã¯æ©‹æ¸¡ã—ã™ã‚‹è¨€èªã‚µãƒ¼ãƒãƒ¼ãŒpullå‹ã®è¨ºæ–­ã«å¯¾å¿œã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

å®Ÿã¯LSPã®ä»•æ§˜ã¨ã—ã¦ã¯è¨ºæ–­ã«ã¯2ã¤ã®æ–¹æ³•ãŒã‚ã‚‹ã®ã§ã™ã­ã€‚

- `textDocument/diagnostics`: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚µãƒ¼ãƒãƒ¼ã«è¨ºæ–­ã‚’è¦æ±‚ã™ã‚‹pullå‹
- `textDocument/publishDiagnostics`: ã‚µãƒ¼ãƒãƒ¼ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¨ºæ–­ã‚’é€šçŸ¥ã™ã‚‹pushå‹

pullå‹ã®æ–¹ãŒå¾Œã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸéƒ½åˆã§ã€publishDiagnosticsã—ã‹ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„è¨€èªã‚µãƒ¼ãƒãƒ¼ï¼ˆä¾‹: lua-language-serverï¼‰ãŒã‚ã‚Šã€ã“ã‚Œã‚‰ã¯ã¾ã æœªã‚µãƒãƒ¼ãƒˆã§ã™ã€‚

kakehashiè‡ªä½“ã¯pull/pushã©ã¡ã‚‰ã‚’é€šã˜ã¦ã§ã‚‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¨ºæ–­çµæœã‚’æ¸¡ã›ã¾ã™ã€‚
ã‚¨ãƒ‡ã‚£ã‚¿ã«ã‚ˆã£ã¦ã¯è¨ºæ–­ã®é‡è¤‡è¡¨ç¤ºãŒç™ºç”Ÿã™ã‚‹ã®ã§ã€è‰¯ã„æ„Ÿã˜ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚
ãŸã¨ãˆã°ç§ã¯kakehashiã«é™ã£ã¦publishDiagnosticsã‚’ç„¡è¦–ã™ã‚‹ã‚ˆã†ã«Neovimã§è¨­å®šã—ã¦ã„ã¾ã™ã€‚

```lua
vim.lsp.handlers["textDocument/publishDiagnostics"] = function(err, result, ctx)
    local client = vim.lsp.get_client_by_id(ctx.client_id)

    local ignore_pull = { "kakehashi" }
    if client and vim.tbl_contains(ignore_pull, client.name) then
      return
    end

    return vim.lsp.diagnostic.on_publish_diagnostics(err, result, ctx)
end
```

# ENJOY!

ã“ã®ãƒ–ãƒ­ã‚°ã‚‚[kakehashi]ã‚’ä½¿ã„ãªãŒã‚‰æ›¸ã„ã¦ãŠã‚Šã€å¤§åˆ†å®‰å®šã—ã¦ããŸãªã¨ã„ã†æ„Ÿè§¦ãŒã‚ã‚Šã¾ã™ã€‚
ãœã²ä½¿ã£ã¦ã¿ã¦GitHubã®ã‚¹ã‚¿ãƒ¼ã‚„ã‚¹ãƒãƒ³ã‚µãƒ¼ã‚’é€šã˜ã¦å¿œæ´ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ï¼

- ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰: <https://github.com/atusy/kakehashi/releases>
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: <https://github.com/atusy/kakehashi/blob/main/docs/README.md>
- Neovimå‘ã‘è¨­å®šä¾‹: <https://github.com/atusy/kakehashi/blob/main/scripts/minimal_init.lua>
- Vimå‘ã‘è¨­å®šä¾‹: <https://github.com/atusy/kakehashi/blob/main/scripts/minimal_init.vim>
